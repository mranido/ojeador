{"ast":null,"code":"var _jsxFileName = \"/home/diego/Escritorio/OjeadorApp/ojeador/frontend/my-app/src/components/UploadVideo.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { AuthContext } from \"./AuthContext\";\nimport { Redirect } from \"react-router\";\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const UploadVideo = () => {\n  _s();\n\n  const [file, setFile] = useState(\"\");\n  const [token] = useContext(AuthContext);\n  const [filePicked, setFilePicked] = useState();\n  const decodedToken = jwt_decode(token);\n  const {\n    userId,\n    userRol\n  } = decodedToken;\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  function uploadFile() {\n    let data = new FormData();\n    console.log(\"Este es el video\", data);\n    data.append(\"profileVideo\", file);\n    fetch(`http://localhost:8000/api/v1/videos/user/${userId}`, {\n      method: \"POST\",\n      body: data,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => console.log('Eso es un video', response)).then(success => \"Archivo subido correctamente\").catch(error => console.log(error));\n  }\n\n  const onFileChange = event => {\n    setFile(event.target.files[0]);\n    setFilePicked(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: token && userRol === \"Player\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: uploadFile,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Subir V\\xEDdeo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: onFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Subir V\\xEDdeo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(UploadVideo, \"C2FhUzSqLk5KI8Fzlprv8Uf7J9o=\");\n\n_c = UploadVideo;\n\nconst FileUpload = () => {\n  _s2();\n\n  const [file, setFile] = useState(\"\");\n  const [filename, setFilename] = useState(\"Choose File\");\n  const [uploadedFile, setUploadedFile] = useState({});\n  const [message, setMessage] = useState(\"\");\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n\n  const onChange = e => {\n    setFile(e.target.files[0]);\n    setFilename(e.target.files[0].name);\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const res = await axios.post(\"/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        onUploadProgress: progressEvent => {\n          setUploadPercentage(parseInt(Math.round(progressEvent.loaded * 100 / progressEvent.total)));\n        }\n      }); // Clear percentage\n\n      setTimeout(() => setUploadPercentage(0), 10000);\n      const {\n        fileName,\n        filePath\n      } = res.data;\n      setUploadedFile({\n        fileName,\n        filePath\n      });\n      setMessage(\"File Uploaded\");\n    } catch (err) {\n      if (err.response.status === 500) {\n        setMessage(\"There was a problem with the server\");\n      } else {\n        setMessage(err.response.data.msg);\n      }\n\n      setUploadPercentage(0);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [message ? /*#__PURE__*/_jsxDEV(Message, {\n      msg: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 18\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom-file mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          className: \"custom-file-input\",\n          id: \"customFile\",\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"custom-file-label\",\n          htmlFor: \"customFile\",\n          children: filename\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Progress, {\n        percentage: uploadPercentage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Upload\",\n        className: \"btn btn-primary btn-block mt-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), uploadedFile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 m-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center\",\n          children: uploadedFile.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            width: \"100%\"\n          },\n          src: uploadedFile.filePath,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(FileUpload, \"MBJNH0dEWqlQFnFPHIgx61D9+uE=\");\n\n_c2 = FileUpload;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UploadVideo\");\n$RefreshReg$(_c2, \"FileUpload\");","map":{"version":3,"sources":["/home/diego/Escritorio/OjeadorApp/ojeador/frontend/my-app/src/components/UploadVideo.js"],"names":["useContext","useState","AuthContext","Redirect","jwt_decode","UploadVideo","file","setFile","token","filePicked","setFilePicked","decodedToken","userId","userRol","errorMsg","setErrorMsg","uploadFile","data","FormData","console","log","append","fetch","method","body","headers","Authorization","then","response","success","catch","error","onFileChange","event","target","files","FileUpload","filename","setFilename","uploadedFile","setUploadedFile","message","setMessage","uploadPercentage","setUploadPercentage","onChange","e","name","onSubmit","preventDefault","formData","res","axios","post","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","setTimeout","fileName","filePath","err","status","msg","width"],"mappings":";;;;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM;AAAA;;AAC/B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACO,KAAD,IAAUR,UAAU,CAACE,WAAD,CAA1B;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,EAA5C;AACA,QAAMU,YAAY,GAAGP,UAAU,CAACI,KAAD,CAA/B;AACA,QAAM;AAAEI,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAsBF,YAA5B;AACA,QAAM,CAACG,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,IAAD,CAAxC;;AAEA,WAASe,UAAT,GAAsB;AACpB,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,IAAhC;AACAA,IAAAA,IAAI,CAACI,MAAL,CAAY,cAAZ,EAA4Bf,IAA5B;AACAgB,IAAAA,KAAK,CAAE,4CAA2CV,MAAO,EAApD,EAAuD;AAC1DW,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,IAAI,EAAEP,IAFoD;AAG1DQ,MAAAA,OAAO,EAAE;AACP,wBAAgB,qBADT;AAEPC,QAAAA,aAAa,EAAG,UAASlB,KAAM;AAFxB;AAHiD,KAAvD,CAAL,CAQGmB,IARH,CAQSC,QAAD,IAAcT,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BQ,QAA9B,CARtB,EASGD,IATH,CASSE,OAAD,IAAa,8BATrB,EAUGC,KAVH,CAUUC,KAAD,IAAWZ,OAAO,CAACC,GAAR,CAAYW,KAAZ,CAVpB;AAWD;;AACD,QAAMC,YAAY,GAAIC,KAAD,IAAW;AAC9B1B,IAAAA,OAAO,CAAC0B,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAP;AACAzB,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAHD;;AAKA,sBACE;AAAA,cACGF,KAAK,IAAIK,OAAO,KAAK,QAArB,gBACC;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,6BACE;AAAM,QAAA,QAAQ,EAAEG,UAAhB;AAAA,gCACE;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,QAAQ,EAAEgB;AAA7B;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAKE;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADD,gBAWC,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AAZJ,mBADF;AAiBD,CA9CM;;GAAM3B,W;;KAAAA,W;;AAgDb,MAAM+B,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAM,CAAC9B,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACoC,QAAD,EAAWC,WAAX,IAA0BrC,QAAQ,CAAC,aAAD,CAAxC;AACA,QAAM,CAACsC,YAAD,EAAeC,eAAf,IAAkCvC,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACwC,OAAD,EAAUC,UAAV,IAAwBzC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC0C,gBAAD,EAAmBC,mBAAnB,IAA0C3C,QAAQ,CAAC,CAAD,CAAxD;;AAEA,QAAM4C,QAAQ,GAAIC,CAAD,IAAO;AACtBvC,IAAAA,OAAO,CAACuC,CAAC,CAACZ,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP;AACAG,IAAAA,WAAW,CAACQ,CAAC,CAACZ,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBY,IAAnB,CAAX;AACD,GAHD;;AAKA,QAAMC,QAAQ,GAAG,MAAOF,CAAP,IAAa;AAC5BA,IAAAA,CAAC,CAACG,cAAF;AACA,UAAMC,QAAQ,GAAG,IAAIhC,QAAJ,EAAjB;AACAgC,IAAAA,QAAQ,CAAC7B,MAAT,CAAgB,MAAhB,EAAwBf,IAAxB;;AAEA,QAAI;AACF,YAAM6C,GAAG,GAAG,MAAMC,KAAK,CAACC,IAAN,CAAW,SAAX,EAAsBH,QAAtB,EAAgC;AAChDzB,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SADuC;AAIhD6B,QAAAA,gBAAgB,EAAGC,aAAD,IAAmB;AACnCX,UAAAA,mBAAmB,CACjBY,QAAQ,CACNC,IAAI,CAACC,KAAL,CAAYH,aAAa,CAACI,MAAd,GAAuB,GAAxB,GAA+BJ,aAAa,CAACK,KAAxD,CADM,CADS,CAAnB;AAKD;AAV+C,OAAhC,CAAlB,CADE,CAcF;;AACAC,MAAAA,UAAU,CAAC,MAAMjB,mBAAmB,CAAC,CAAD,CAA1B,EAA+B,KAA/B,CAAV;AAEA,YAAM;AAAEkB,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAyBZ,GAAG,CAAClC,IAAnC;AAEAuB,MAAAA,eAAe,CAAC;AAAEsB,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAD,CAAf;AAEArB,MAAAA,UAAU,CAAC,eAAD,CAAV;AACD,KAtBD,CAsBE,OAAOsB,GAAP,EAAY;AACZ,UAAIA,GAAG,CAACpC,QAAJ,CAAaqC,MAAb,KAAwB,GAA5B,EAAiC;AAC/BvB,QAAAA,UAAU,CAAC,qCAAD,CAAV;AACD,OAFD,MAEO;AACLA,QAAAA,UAAU,CAACsB,GAAG,CAACpC,QAAJ,CAAaX,IAAb,CAAkBiD,GAAnB,CAAV;AACD;;AACDtB,MAAAA,mBAAmB,CAAC,CAAD,CAAnB;AACD;AACF,GAnCD;;AAqCA,sBACE,QAAC,QAAD;AAAA,eACGH,OAAO,gBAAG,QAAC,OAAD;AAAS,MAAA,GAAG,EAAEA;AAAd;AAAA;AAAA;AAAA;AAAA,YAAH,GAA+B,IADzC,eAEE;AAAM,MAAA,QAAQ,EAAEO,QAAhB;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,SAAS,EAAC,mBAFZ;AAGE,UAAA,EAAE,EAAC,YAHL;AAIE,UAAA,QAAQ,EAAEH;AAJZ;AAAA;AAAA;AAAA;AAAA,gBADF,eAOE;AAAO,UAAA,SAAS,EAAC,mBAAjB;AAAqC,UAAA,OAAO,EAAC,YAA7C;AAAA,oBACGR;AADH;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAaE,QAAC,QAAD;AAAU,QAAA,UAAU,EAAEM;AAAtB;AAAA;AAAA;AAAA;AAAA,cAbF,eAeE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,KAAK,EAAC,QAFR;AAGE,QAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA,cAfF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAuBGJ,YAAY,gBACX;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,aAAd;AAAA,oBAA6BA,YAAY,CAACuB;AAA1C;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,KAAK,EAAE;AAAEK,YAAAA,KAAK,EAAE;AAAT,WAAZ;AAA+B,UAAA,GAAG,EAAE5B,YAAY,CAACwB,QAAjD;AAA2D,UAAA,GAAG,EAAC;AAA/D;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADW,GAOT,IA9BN;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkCD,CAnFD;;IAAM3B,U;;MAAAA,U","sourcesContent":["import { useContext, useState } from \"react\";\nimport { AuthContext } from \"./AuthContext\";\nimport { Redirect } from \"react-router\";\nimport jwt_decode from \"jwt-decode\";\n\nexport const UploadVideo = () => {\n  const [file, setFile] = useState(\"\");\n  const [token] = useContext(AuthContext);\n  const [filePicked, setFilePicked] = useState();\n  const decodedToken = jwt_decode(token);\n  const { userId, userRol } = decodedToken;\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  function uploadFile() {\n    let data = new FormData();\n    console.log(\"Este es el video\", data);\n    data.append(\"profileVideo\", file);\n    fetch(`http://localhost:8000/api/v1/videos/user/${userId}`, {\n      method: \"POST\",\n      body: data,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((response) => console.log('Eso es un video',response))\n      .then((success) => \"Archivo subido correctamente\")\n      .catch((error) => console.log(error));\n  }\n  const onFileChange = (event) => {\n    setFile(event.target.files[0]);\n    setFilePicked(true);\n  };\n\n  return (\n    <>\n      {token && userRol === \"Player\" ? (\n        <div className=\"App\">\n          <form onSubmit={uploadFile}>\n            <div>\n              <label>Subir Vídeo</label>\n              <input type=\"file\" onChange={onFileChange} />\n            </div>\n            <button type=\"submit\">Subir Vídeo</button>\n          </form>\n        </div>\n      ) : (\n        <Redirect to=\"/profile\" />\n      )}\n    </>\n  );\n};\n\nconst FileUpload = () => {\n  const [file, setFile] = useState(\"\");\n  const [filename, setFilename] = useState(\"Choose File\");\n  const [uploadedFile, setUploadedFile] = useState({});\n  const [message, setMessage] = useState(\"\");\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n\n  const onChange = (e) => {\n    setFile(e.target.files[0]);\n    setFilename(e.target.files[0].name);\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const res = await axios.post(\"/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        onUploadProgress: (progressEvent) => {\n          setUploadPercentage(\n            parseInt(\n              Math.round((progressEvent.loaded * 100) / progressEvent.total)\n            )\n          );\n        },\n      });\n\n      // Clear percentage\n      setTimeout(() => setUploadPercentage(0), 10000);\n\n      const { fileName, filePath } = res.data;\n\n      setUploadedFile({ fileName, filePath });\n\n      setMessage(\"File Uploaded\");\n    } catch (err) {\n      if (err.response.status === 500) {\n        setMessage(\"There was a problem with the server\");\n      } else {\n        setMessage(err.response.data.msg);\n      }\n      setUploadPercentage(0);\n    }\n  };\n\n  return (\n    <Fragment>\n      {message ? <Message msg={message} /> : null}\n      <form onSubmit={onSubmit}>\n        <div className=\"custom-file mb-4\">\n          <input\n            type=\"file\"\n            className=\"custom-file-input\"\n            id=\"customFile\"\n            onChange={onChange}\n          />\n          <label className=\"custom-file-label\" htmlFor=\"customFile\">\n            {filename}\n          </label>\n        </div>\n\n        <Progress percentage={uploadPercentage} />\n\n        <input\n          type=\"submit\"\n          value=\"Upload\"\n          className=\"btn btn-primary btn-block mt-4\"\n        />\n      </form>\n      {uploadedFile ? (\n        <div className=\"row mt-5\">\n          <div className=\"col-md-6 m-auto\">\n            <h3 className=\"text-center\">{uploadedFile.fileName}</h3>\n            <img style={{ width: \"100%\" }} src={uploadedFile.filePath} alt=\"\" />\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  );\n};\n\n"]},"metadata":{},"sourceType":"module"}